import{r as i,j as e,L as b,H as m}from"./app-1-J-Rkvr.js";import{C as k,b as C,c as B,a as S}from"./card-BY_Q-Zm1.js";import{B as A}from"./label-BV62W-PP.js";import{B as p,d as E}from"./Footer-D5nGiAW4.js";import{U}from"./user-CuY1X4ky.js";import{C as _}from"./calendar-9IpFjb3C.js";import{A as L}from"./arrow-right-CxRm3-5f.js";import{C as N}from"./circle-alert-CTpRWOly.js";import{G as h}from"./GuestLayout-CEjHs8fn.js";import"./index-B_wQ5iga.js";const P=window.location.origin+"/api";function $(t){return t?t.startsWith("http")||t.startsWith("data:")?t:`${P.replace("/api","")}${t}`:"/placeholder.svg"}function R({categories:t,blogPosts:s}){const[a,c]=i.useState("All"),o=a==="All"?s:s.filter(r=>r.category===a);return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"py-12 bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Explore by Category"}),e.jsx("div",{className:"mb-4 text-center",children:e.jsxs("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:["Showing ",o.length," of ",s.length," blog post",o.length!==1?"s":"",a!=="All"&&` in "${a}"`]})}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:t.map(r=>e.jsx(p,{variant:r===a?"default":"outline",className:`cursor-pointer transition-colors ${r===a?"bg-[#e51083] hover:bg-[#c50e73]":"hover:bg-[#e51083] hover:text-white"}`,onClick:()=>c(r),children:r},r))})]})})}),o.length>0?e.jsx("section",{className:"py-20",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map(r=>e.jsxs(k,{className:"overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:$(r.image),alt:r.title,width:300,height:200,className:"w-full h-48 object-cover"}),e.jsx(p,{className:"absolute top-4 right-4 bg-[#e51083]",children:r.category})]}),e.jsx(C,{children:e.jsx(B,{className:"text-xl line-clamp-2",children:r.title})}),e.jsxs(S,{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 line-clamp-3",children:r.excerpt}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{children:r.author})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{children:r.date})]})]}),e.jsx("span",{children:r.readTime})]}),e.jsx(b,{href:`/blog/${r.id}`,children:e.jsxs("button",{className:"w-full bg-[#e51083] hover:bg-[#c50e73] text-white py-2 px-4 rounded-md transition-colors duration-300 flex items-center justify-center mt-4",children:["Read More ",e.jsx(L,{className:"ml-2 h-4 w-4"})]})})]})]},r.id))})})}):e.jsx("section",{className:"py-20",children:e.jsx("div",{className:"container mx-auto px-4 text-center",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(N,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Blog Posts Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a==="All"?"No blog posts are currently available. Please check back later or contact the administrator.":`No blog posts found in the "${a}" category. Try selecting a different category.`})]})})})]})}const T=window.location.origin+"/api";function j(t){return{id:t.id,title:t.title,excerpt:t.excerpt||t.content.substring(0,150)+"...",image:t.featured_image||"/placeholder.svg?height=200&width=300",author:t.author||"Bidii Team",date:t.created_at?new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown date",category:t.category||"General",readTime:D(t.content),slug:t.slug}}function D(t){const a=t.split(/\s+/).length;return`${Math.ceil(a/200)} min read`}function F({message:t}){return e.jsx("div",{className:"container mx-auto px-4 py-20",children:e.jsx("div",{className:"max-w-2xl mx-auto text-center",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-8",children:[e.jsx(N,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-red-800 dark:text-red-200 mb-2",children:"Database Connection Error"}),e.jsx("p",{className:"text-red-600 dark:text-red-300 mb-6",children:t}),e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:"Please ensure your database connection is working properly."})})]})})})}function Y({auth:t,blogPosts:s=[]}){const[a,c]=i.useState(s),[o,r]=i.useState(!1),[u,g]=i.useState(null),[y,f]=i.useState(["All"]);return i.useEffect(()=>{async function w(){if(s.length>0){const n=s.map(j);c(n);const x=Array.from(new Set(s.map(l=>l.category).filter(l=>l!=null&&l.trim()!==""))).sort();f(["All",...x]);return}try{r(!0);const n=await fetch(`${T}/blog`);if(n.ok){const x=await n.json(),l=x.map(j);c(l);const v=Array.from(new Set(x.map(d=>d.category).filter(d=>d!=null&&d.trim()!==""))).sort();f(["All",...v])}else console.error("Failed to fetch blog posts"),g("Failed to connect to the database. Please check your database configuration.")}catch(n){console.error("Error fetching blog posts:",n),g("Failed to connect to the database. Please check your database configuration.")}finally{r(!1)}}w()},[]),o?e.jsxs(h,{children:[e.jsx(m,{title:"Blog"}),e.jsxs("div",{children:[e.jsx("section",{className:"py-20 bg-gradient-to-r from-[#e51083] to-pink-600 text-white",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:"Our Blog"}),e.jsx("p",{className:"text-xl md:text-2xl max-w-3xl mx-auto",children:"Stories of impact, education, and empowerment from the field"})]})}),e.jsxs("div",{className:"flex justify-center items-center py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#e51083]"}),e.jsx("p",{className:"ml-4 text-gray-600 dark:text-gray-400",children:"Loading blog posts..."})]})]})]}):u?e.jsxs(h,{children:[e.jsx(m,{title:"Blog"}),e.jsxs("div",{children:[e.jsx("section",{className:"py-20 bg-gradient-to-r from-[#e51083] to-pink-600 text-white",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:"Our Blog"}),e.jsx("p",{className:"text-xl md:text-2xl max-w-3xl mx-auto",children:"Stories of impact, education, and empowerment from the field"})]})}),e.jsx(F,{message:u})]})]}):e.jsxs(h,{children:[e.jsx(m,{title:"Blog"}),e.jsxs("div",{children:[e.jsx("section",{className:"py-20 bg-gradient-to-r from-[#e51083] to-pink-600 text-white",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:"Our Blog"}),e.jsx("p",{className:"text-xl md:text-2xl max-w-3xl mx-auto",children:"Stories of impact, education, and empowerment from the field"}),a.length===0&&e.jsx("div",{className:"mt-4 p-4 bg-yellow-500/20 border border-yellow-400 rounded-lg text-yellow-100",children:"⚠️ No blog posts found in the database. Please add some blog posts or check if the seed data was imported correctly."})]})}),e.jsx(R,{categories:y,blogPosts:a}),e.jsx("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Join Our Mission"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 mb-8 max-w-2xl mx-auto",children:"Your support can help us expand our reach and impact more lives. Every donation brings us closer to our goal of eradicating period poverty."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center max-w-md mx-auto mb-12",children:[e.jsx(E,{className:"flex-1 h-11 flex items-center justify-center rounded-md font-medium transition-all duration-200 hover:scale-[0.98]"}),e.jsx(b,{href:"/contact",className:"flex-1",children:e.jsx(A,{variant:"outline",className:"w-full h-11 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 bg-transparent rounded-md font-medium transition-all duration-200 hover:scale-[0.98] focus:ring-2 focus:ring-[#e51083]/20",children:"Volunteer with Us"})})]})]})}),e.jsx("section",{className:"py-20 bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Stay Updated"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 mb-8 max-w-2xl mx-auto",children:"Subscribe to our newsletter to get the latest stories and updates from our programs."}),e.jsxs("div",{className:"max-w-md mx-auto flex gap-2",children:[e.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#e51083]"}),e.jsx("button",{className:"bg-[#e51083] hover:bg-[#c50e73] text-white px-6 py-2 rounded-md transition-colors",children:"Subscribe"})]})]})})]})]})}export{Y as default};
