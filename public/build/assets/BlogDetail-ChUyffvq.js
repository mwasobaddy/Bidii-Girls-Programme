import{r as i,j as e,H as m,L as h}from"./app-1-J-Rkvr.js";import{B as n}from"./label-BV62W-PP.js";import{C as v,a as w}from"./card-BY_Q-Zm1.js";import{B as S,C as _,d as D}from"./Footer-D5nGiAW4.js";import{G as d}from"./GuestLayout-CEjHs8fn.js";import{A as j,S as I}from"./share-2-2T8nRMF_.js";import{U as T}from"./user-CuY1X4ky.js";import{C as U}from"./calendar-9IpFjb3C.js";import{C as $}from"./clock-BOzEsbph.js";import{C as A}from"./chevron-left-Djciormo.js";import{C as R}from"./circle-alert-CTpRWOly.js";import"./index-B_wQ5iga.js";const y=window.location.origin+"/api";function f(l){return l?l.startsWith("http")||l.startsWith("data:")?l:`${y.replace("/api","")}${l}`:"/placeholder.svg"}function F({message:l}){return e.jsx("div",{className:"pt-16 min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-center max-w-md mx-auto",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-8",children:[e.jsx(R,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-red-800 dark:text-red-200 mb-2",children:"Database Connection Error"}),e.jsx("p",{className:"text-red-600 dark:text-red-300 mb-6",children:l}),e.jsx(h,{href:"/blog",children:e.jsxs(n,{className:"bg-[#e51083] hover:bg-[#c50e73]",children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Back to Blog"]})})]})})})}function Q({auth:l,blogPost:o}){const[c,x]=i.useState(0),[a,k]=i.useState(o),[C,p]=i.useState(!o),[b,g]=i.useState(null);if(i.useEffect(()=>{async function r(){if(!o)try{p(!0);const t=await fetch(`${y}/blog/${window.location.pathname.split("/").pop()}`);if(!t.ok){if(t.status===404)g("Post not found");else{const N=await t.json();g(N.error||"Failed to fetch blog post")}return}const u=await t.json();k(u)}catch(t){console.error("Error fetching blog post:",t),g("Failed to connect to the database. Please check your database configuration.")}finally{p(!1)}}r()},[]),C)return e.jsxs(d,{children:[e.jsx(m,{title:"Loading..."}),e.jsx("div",{className:"pt-16 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#e51083] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading blog post..."})]})})]});if(b)return e.jsxs(d,{children:[e.jsx(m,{title:"Error"}),e.jsx(F,{message:b})]});if(!a)return e.jsxs(d,{children:[e.jsx(m,{title:"Not Found"}),e.jsx("div",{className:"pt-16 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Post Not Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The blog post you're looking for doesn't exist or has been removed."}),e.jsx(h,{href:"/blog",children:e.jsxs(n,{className:"bg-[#e51083] hover:bg-[#c50e73]",children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Back to Blog"]})})]})})]});const B=()=>{a.images&&a.images.length>0&&x(r=>(r+1)%a.images.length)},L=()=>{a.images&&a.images.length>0&&x(r=>(r-1+a.images.length)%a.images.length)},s={...a,author:a.author||"Bidii Team",date:a.created_at?new Date(a.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown date",category:a.category||"General",readTime:E(a.content),images:a.images||[]};function E(r){const u=r.split(/\s+/).length;return`${Math.ceil(u/200)} min read`}return e.jsxs(d,{children:[e.jsx(m,{title:s.title}),e.jsxs("div",{children:[e.jsx("section",{className:"py-12 bg-gray-50 dark:bg-gray-800",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx(h,{href:"/blog",children:e.jsxs(n,{variant:"ghost",className:"mb-6 hover:scale-105 transition-transform",children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Back to Blog"]})}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx(S,{className:"mb-4 bg-[#e51083]",children:s.category}),e.jsx("h1",{className:"text-3xl md:text-5xl font-bold mb-6 animate-fade-in-up",children:s.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-gray-600 dark:text-gray-400 mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{children:s.author})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{children:s.date})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{children:s.readTime})]}),e.jsxs(n,{variant:"ghost",size:"sm",className:"ml-auto hover:scale-105 transition-transform",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Share"]})]})]})]})}),e.jsx("section",{className:"py-12",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-12 animate-fade-in-up",children:e.jsx("img",{src:f(s.featured_image),alt:s.title,width:800,height:500,className:"w-full rounded-lg shadow-lg"})}),e.jsx("div",{className:"prose prose-lg max-w-none mb-12 animate-fade-in-up animation-delay-200",dangerouslySetInnerHTML:{__html:s.content}}),s.images&&s.images.length>0&&e.jsx(v,{className:"mb-12 animate-fade-in-up animation-delay-400",children:e.jsxs(w,{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Photo Gallery"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-video relative overflow-hidden rounded-lg",children:e.jsx("img",{src:f(s.images[c]),alt:`Gallery image ${c+1}`,className:"w-full h-full object-cover transition-all duration-300"})}),s.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:L,className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white hover:bg-black/70 hover:scale-110 transition-all",children:e.jsx(A,{className:"h-5 w-5"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:B,className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white hover:bg-black/70 hover:scale-110 transition-all",children:e.jsx(_,{className:"h-5 w-5"})})]})]}),s.images.length>1&&e.jsx("div",{className:"flex space-x-2 mt-4 overflow-x-auto",children:s.images.map((r,t)=>e.jsx("button",{onClick:()=>x(t),className:`flex-shrink-0 w-16 h-16 rounded border-2 overflow-hidden transition-all duration-300 hover:scale-105 ${t===c?"border-[#e51083]":"border-gray-300"}`,children:e.jsx("img",{src:f(r),alt:`Thumbnail ${t+1}`,width:64,height:64,className:"w-full h-full object-cover"})},t))}),e.jsxs("div",{className:"text-center mt-4 text-sm text-gray-600 dark:text-gray-400",children:["Image ",c+1," of ",s.images.length]})]})}),e.jsx(v,{className:"bg-[#e51083] text-white animate-fade-in-up animation-delay-600",children:e.jsxs(w,{className:"p-8 text-center",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Join Our Mission"}),e.jsx("p",{className:"mb-6",children:"Help us continue creating stories like this. Your support makes a real difference in girls' lives."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(D,{className:"bg-white text-[#e51083] hover:bg-gray-100 hover:scale-105 transition-all"}),e.jsx(h,{href:"/contact",children:e.jsx(n,{variant:"outline",className:"w-full border-white text-white hover:bg-white hover:text-[#e51083] bg-transparent hover:scale-105 transition-all",children:"Volunteer With Us"})})]})]})})]})})})]})]})}export{Q as default};
